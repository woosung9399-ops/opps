<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>오늘의 별자리 운세</title>
<meta name="theme-color" content="#FFE18A"/>

<!-- 주황색 동그라미 파비콘 -->
<link rel="icon" href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
  <circle cx='50' cy='50' r='45' fill='%23ff9800'/>
</svg>">

<style>
  @font-face{
    font-family:'DungGeunMo';
    src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/DungGeunMo.woff2') format('woff2');
    font-weight:normal; font-style:normal; font-display:swap;
  }
  :root{
    --bg:#ffe18a; --ink:#5a3b1a; --accent:#ff8a42; --accent-deep:#ea6a1b;
    --card:#fffaf0; --muted:#7b4b22;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:'DungGeunMo',Pretendard,system-ui,-apple-system,sans-serif;background:var(--bg);min-height:100vh;color:var(--ink);display:flex;flex-direction:column}
  .site-header{position:sticky;top:0;display:flex;align-items:center;justify-content:center;background:#fff;padding:12px;border-bottom:1px solid #e5e7eb}
  .site-header h1{margin:0;font-size:1.2rem;color:#111}
  .container{flex:1;display:flex;align-items:center;justify-content:center;padding:20px}
  .view{display:none}
  .view.active{display:block;animation:.3s fadeInUp}
  @keyframes fadeInUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
  .intro{text-align:center;max-width:760px}
  .intro h2{margin:0;font-size:2rem}
  .intro p{margin:.5rem 0 1rem;font-size:1rem;color:var(--muted)}
  .row{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
  input[type="date"]{font-family:inherit;padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb;background:#fff;font-size:1rem}
  .cta{display:inline-block;margin-top:12px;padding:10px 16px;border-radius:999px;background:linear-gradient(180deg,var(--accent),var(--accent-deep));color:#fff;font-weight:700;cursor:pointer;box-shadow:0 6px 0 #ce5c14}
  .card{background:var(--card);border:1px solid #f2e5cf;border-radius:16px;padding:20px;box-shadow:0 8px 24px rgba(0,0,0,.15);max-width:880px}
  .head{display:flex;gap:14px;align-items:center}
  .zimg{width:84px;height:84px;border-radius:50%;flex:0 0 84px;display:grid;place-items:center;overflow:hidden;border:1px solid rgba(0,0,0,.06);box-shadow:0 6px 16px rgba(0,0,0,.12)}
  .zname{margin:0;font-size:1.25rem}
  .result-msg{font-size:1.05rem;line-height:1.6;margin:.5rem 0 0}
  .facts{margin-top:14px;display:grid;gap:10px}
  .fact{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;padding:10px;border-radius:12px;background:#fff}
  .f-ico{font-size:1.1rem}
  .f-label{color:#7a5935}
  .f-val{font-weight:800}
  .btns{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
  .btns button{all:unset;cursor:pointer;padding:10px 14px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;font-weight:700}
  .hint{font-size:.9rem;opacity:.9}
</style>
</head>
<body>
  <!-- 헤더 -->
  <header class="site-header">
    <h1>오늘의 별자리 운세</h1>
  </header>

  <div class="container">
    <!-- 인트로 -->
    <section id="viewIntro" class="view intro active">
      <h2>학습자님!</h2>
      <p>생년월일을 입력하면 별자리 맞춤 운세가 보여요 ✨</p>
      <div class="row">
        <input type="date" id="birthInput" aria-label="생년월일" />
      </div>
      <div class="cta" id="showBtn" role="button" tabindex="0" aria-label="운세 보기">운세 보기</div>
      <p class="hint" style="margin-top:10px">* 생년월일을 입력하지 않으면 공통 운세가 보여요</p>
    </section>

    <!-- 결과 -->
    <section id="viewResult" class="view">
      <div class="card">
        <div class="head">
          <div class="zimg" id="zodiacImg" aria-hidden="true"></div>
          <h3 class="zname" id="zodiacTitle">별자리</h3>
        </div>
        <p class="result-msg" id="fortuneText">결과를 불러오는 중…</p>

        <div class="facts" id="facts">
          <!-- 동적 생성: 점수, 음식, 색, 숫자 -->
        </div>

        <div class="btns">
          <button id="shareBtn">공유/복사</button>
          <button id="linkBtn">링크</button>
        </div>
      </div>
    </section>
  </div>

<script>
"use strict";
const $=s=>document.querySelector(s);
const intro=$("#viewIntro"), result=$("#viewResult");
const birthInput=$("#birthInput"), showBtn=$("#showBtn");
const zodiacTitle=$("#zodiacTitle"), fortuneText=$("#fortuneText"), zodiacImg=$("#zodiacImg");
const factsEl=$("#facts");
const shareBtn=$("#shareBtn"), linkBtn=$("#linkBtn");

/* 랜덤 */
const rnd = () => Math.random();

/* 별자리 계산(서양 12궁) */
function getZodiac(month,day){
  const rules = [
    ["물병자리","♒",1,20,2,18],
    ["물고기자리","♓",2,19,3,20],
    ["양자리","♈",3,21,4,19],
    ["황소자리","♉",4,20,5,20],
    ["쌍둥이자리","♊",5,21,6,21],
    ["게자리","♋",6,22,7,22],
    ["사자자리","♌",7,23,8,22],
    ["처녀자리","♍",8,23,9,22],
    ["천칭자리","♎",9,23,10,22],
    ["전갈자리","♏",10,23,11,22],
    ["사수자리","♐",11,23,12,21],
    ["염소자리","♑",12,22,1,19]
  ];
  for(const [name,sym,m1,d1,m2,d2] of rules){
    if((month===m1 && day>=d1) || (month===m2 && day<=d2)) return {name,sym};
  }
  return null;
}

/* 별자리별 10개 메시지 */
const Z = {
  "양자리":[
    "시작의 에너지가 강합니다. 먼저 시도해 보세요.","속도를 내되 마무리를 잊지 않으면 완벽합니다.",
    "당당한 태도가 설득력을 높입니다.","작은 승리가 큰 자신감을 키워줘요.","경쟁보다 ‘나와의 레이스’에 집중해보세요.",
    "의욕이 넘칠 땐 하나에 올인할 때입니다.","먼저 연락하면 흐름이 열립니다.","짧은 실행이 긴 고민을 이깁니다.",
    "리더십을 발휘할 순간이 옵니다.","신나는 소식이 당신을 재촉합니다."
  ],
  "황소자리":[
    "꾸준함이 금입니다. 오늘도 작은 루틴을 지켜보세요.","감각적인 선택이 만족도를 올려줍니다.",
    "가치 있는 것에만 에너지를 쓰면 평온합니다.","속도를 늦추면 더 멀리 갑니다.","안정된 페이스가 최고의 결과를 만듭니다.",
    "현실적인 기준이 방향을 잡아줍니다.","소소한 즐거움이 큰 힐링이 됩니다.","적립·절약이 실속을 챙겨줍니다.",
    "신중함이 실수를 줄입니다.","한 번 더 확인하면 걱정이 줄어요."
  ],
  "쌍둥이자리":[
    "소통 운이 상승! 대화에서 답을 얻습니다.","두 아이디어를 섞으면 멋진 해법이 나와요.",
    "가벼운 메시지가 좋은 인연을 부릅니다.","정보의 신뢰도를 마지막에 점검하세요.","변화가 재미를 더합니다. 관성을 깨보세요.",
    "짧은 미팅이 긴 문서보다 설득력 있습니다.","호기심이 인사이트로 이어집니다.","빠른 피드백이 흐름을 키웁니다.",
    "유연한 태도가 기회를 확장합니다.","작은 농담이 분위기를 녹입니다."
  ],
  "게자리":[
    "정서적 교감이 키포인트. 가까운 이들과 따뜻한 시간.","편안함을 먼저 챙기면 성과가 따라옵니다.",
    "과거의 기억이 힌트를 줍니다.","집중보다 회복이 필요한 날일 수 있어요.","배려가 신뢰를 만들어요.",
    "감정의 파도엔 작은 휴식이 특효약.","익숙한 장소에서 아이디어가 떠오릅니다.","안전망을 확인하면 과감해집니다.",
    "소소한 집밥/티타임이 컨디션을 올립니다.","마음의 온도를 지키면 관계가 편안해져요."
  ],
  "사자자리":[
    "스포트라이트! 표현할수록 운이 커집니다.","자신감 있는 발표가 기회를 부릅니다.",
    "작은 선행이 큰 응원을 만듭니다.","주도권을 잡고 방향을 제시해 보세요.","칭찬이 협력을 이끕니다.",
    "당신의 매력이 설득의 핵심입니다.","드레스업/연출이 플러스 요인!","대담한 목표가 동력을 만듭니다.",
    "과감한 한 걸음이 돌파구가 됩니다.","긍정 에너지가 주변을 밝힙니다."
  ],
  "처녀자리":[
    "디테일이 완성도를 좌우합니다. 체크리스트가 행운템.","정리정돈이 생각도 맑게 해줘요.",
    "작은 오류를 먼저 잡으면 속도가 붙습니다.","데이터가 판단을 견고하게 합니다.","프로세스를 가볍게 다듬어 보세요.",
    "균형 잡힌 식단/수면이 집중력을 올립니다.","문서/메일을 한 번 더 검토해요.","미리 준비한 템플릿이 시간을 아껴줍니다.",
    "실행 로그가 성장의 증거가 됩니다.","바른 자세가 컨디션을 지켜줍니다."
  ],
  "천칭자리":[
    "균형 감각이 빛납니다. 모두가 만족할 해법을 찾습니다.","공정한 태도가 신뢰를 만듭니다.",
    "미적 감각이 설득에 힘을 보탭니다.","대화에서 타협점을 발견하게 될 거예요.","역지사지가 갈등을 녹입니다.",
    "관계를 정리·정돈하면 마음이 가벼워져요.","상호이익을 제안해 보세요.","작은 감사 인사가 큰 동력을 부릅니다.",
    "소거법으로 선택을 좁혀보세요.","완급조절이 성과를 만듭니다."
  ],
  "전갈자리":[
    "몰입력이 최고조. 한 가지를 깊게 파보세요.","진심 어린 대화가 변화를 만듭니다.",
    "핵심을 파악하면 갈등이 풀립니다.","집중 시간에 방해 요소를 차단하세요.","깊은 기록이 통찰을 남깁니다.",
    "미스터리를 해소할 키가 당신에게 있습니다.","의지력이 장애물을 녹입니다.","단호한 기준이 나를 지켜줍니다.",
    "감정의 뿌리를 이해하면 편안해져요.","소수정예 전략이 효과적입니다."
  ],
  "사수자리":[
    "확장과 탐험! 시야를 넓힐수록 기회가 열려요.","큰 그림을 그리고 작은 실행으로 이어가요.",
    "낙관이 추진력을 만듭니다.","여행/야외 활동이 영감을 줍니다.","새로운 공부가 지평을 넓힙니다.",
    "모험하되 안전장치도 챙겨요.","유연한 일정이 행운을 끌어옵니다.","재미를 섞으면 지속성이 올라갑니다.",
    "도전의식이 좋은 사람들을 불러옵니다.","넓은 네트워크에서 기회가 옵니다."
  ],
  "염소자리":[
    "목표지향의 날. 계획표가 힘이 됩니다.","원칙과 성실함이 보답받습니다.",
    "조용한 꾸준함이 가장 강력합니다.","현실적인 마일스톤이 진전을 만듭니다.","책임감이 신뢰를 쌓아줍니다.",
    "공들인 만큼 결과가 정직합니다.","장기전 준비에 유리한 흐름이에요.","규율이 자유를 만들어 줍니다.",
    "한 계단씩 안정적으로 올라갑니다.","기본에 충실할수록 빛이 납니다."
  ],
  "물병자리":[
    "새로운 방식이 통합니다. 실험을 두려워하지 마세요.","네트워킹에서 뜻밖의 힌트를 얻어요.",
    "자율성이 창의력을 깨웁니다.","틀 밖의 아이디어가 환영받습니다.","오픈소스/레퍼런스가 해결책을 줍니다.",
    "가벼운 테스트가 큰 리스크를 줄입니다.","유니크함이 경쟁력입니다.","디지털 정리가 효율을 올립니다.",
    "가치관이 맞는 사람과 연결되기 쉬운 날.","규칙을 알면 예외를 만들 줄 알게 됩니다."
  ],
  "물고기자리":[
    "감수성이 풍부합니다. 직관 메모가 인사이트로.","작은 친절이 큰 울림으로 돌아옵니다.",
    "휴식과 몰입의 균형을 잡아보세요.","음악/예술이 회복을 돕습니다.","꿈에서 아이디어가 스며듭니다.",
    "느슨한 산책이 마음을 정리해 줘요.","공감이 대화를 따뜻하게 합니다.","경계를 부드럽게 지키는 연습을 해요.",
    "물 흐르듯 맡기면 해결되는 일도 있어요.","섬세함이 매력으로 빛납니다."
  ],
  "공통":[
    "작은 시작이 큰 변화를 부릅니다.","타이밍이 좋습니다. 가볍게 시도해 보세요.",
    "준비된 곳에 행운이 머뭅니다.","첫 걸음이 방향을 만듭니다.","꾸준함이 오늘의 치트키.",
    "마음의 여유가 선택을 밝게 합니다.","관찰이 인사이트로 이어집니다.","정리정돈이 생각까지 맑게 해줘요.",
    "친절은 늘 좋은 투자입니다.","하루의 목표를 한 줄로 적어보세요."
  ]
};

/* 행운 데이터 */
const FOODS = ["순두부찌개","김치볶음밥","파스타","비빔국수","불고기","연어초밥","우동","치킨","팥빙수","라떼","김밥","칼국수","떡볶이","만두","샐러드"];
const COLORS_KO = ["피치 오렌지","바나나 옐로","숲 그린","하늘 블루","포도 바이올렛","분홍 핑크","차분 네이비","코랄 레드","라일락","민트","올리브","샌드 베이지"];

/* 별자리 이미지(SVG 배지) 생성 */
function zodiacSVG(sym, gradA="#ffd08a", gradB="#ff9f5c"){
  const svg = `
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="84" height="84" aria-hidden="true">
    <defs>
      <radialGradient id="g" cx="35%" cy="30%" r="70%">
        <stop offset="0%" stop-color="${gradA}"/>
        <stop offset="100%" stop-color="${gradB}"/>
      </radialGradient>
      <filter id="s" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0,0,0,.25)"/>
      </filter>
    </defs>
    <circle cx="60" cy="60" r="54" fill="url(#g)" stroke="rgba(0,0,0,.08)" />
    <text x="60" y="72" text-anchor="middle" font-size="64" filter="url(#s)"> ${sym} </text>
  </svg>`;
  return svg;
}

/* 메시지 선택 */
function pickMsg(sign){
  const arr = Z[sign] || Z["공통"];
  return arr[Math.floor(rnd()*arr.length)];
}

/* 값 생성 */
function genLucky(){
  const score = Math.floor(60 + rnd()*40); // 60~100
  const food = FOODS[Math.floor(rnd()*FOODS.length)];
  const color = COLORS_KO[Math.floor(rnd()*COLORS_KO.length)];
  const num = String(Math.floor(rnd()*1_000_000)).padStart(6,"0");
  return {score, food, color, num};
}

/* 렌더 팩트 라인 */
function renderFacts({score,food,color,num}){
  factsEl.innerHTML = "";
  const rows = [
    {ico:"⭐", label:"오늘의 점수", value:`${score}점`},
    {ico:"🍽️", label:"행운 음식", value:food},
    {ico:"🎨", label:"행운 색", value:color},
    {ico:"#️⃣", label:"행운 숫자", value:num},
  ];
  for(const r of rows){
    const div=document.createElement('div'); div.className="fact";
    div.innerHTML = `<div class="f-ico">${r.ico}</div>
                     <div class="f-label">${r.label}</div>
                     <div class="f-val">${r.value}</div>`;
    factsEl.appendChild(div);
  }
}

/* 운세 표시 */
function showFortune(){
  const val = birthInput.value;
  let sign = null, sym = "🔮";
  if(val){
    const d = new Date(val+"T00:00");
    if(!isNaN(d)){
      const z = getZodiac(d.getMonth()+1, d.getDate());
      if(z){ sign = z.name; sym = z.sym; }
    }
  }
  const title = sign ? `${sign}` : "오늘의 운세(공통)";
  zodiacTitle.textContent = title;
  fortuneText.textContent = pickMsg(sign || "공통");

  // 이미지 렌더
  zodiacImg.innerHTML = zodiacSVG(sym);

  // 보너스 정보
  renderFacts(genLucky());

  intro.classList.remove("active");
  result.classList.add("active");
}

/* 이벤트 */
showBtn.addEventListener("click", showFortune);
showBtn.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); showFortune(); }});

/* 공유 & 링크 (DOB 미포함) */
shareBtn.addEventListener("click", async ()=>{
  const text = `🔮 ${zodiacTitle.textContent}\n${fortuneText.textContent}
- ${factsEl.querySelectorAll('.f-val')[0]?.textContent} / ${factsEl.querySelectorAll('.f-val')[1]?.textContent}
- ${factsEl.querySelectorAll('.f-val')[2]?.textContent} / ${factsEl.querySelectorAll('.f-val')[3]?.textContent}`;
  try{
    if(navigator.share){ await navigator.share({title:"오늘의 별자리 운세", text}); }
    else { await navigator.clipboard.writeText(text); alert("복사 완료!"); }
  }catch(_){}
});
linkBtn.addEventListener("click", async ()=>{
  const url = location.href.split("?")[0];
  try{ await navigator.clipboard.writeText(url); alert("링크가 복사되었습니다!"); }
  catch{ prompt("아래 링크를 복사하세요", url); }
});
</script>
</body>
</html>