<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>í¬ì¶˜ì¿ í‚¤ ì˜¤ëŠ˜ì˜ ìš´ì„¸</title>
<meta name="theme-color" content="#FFE18A"/>
<meta name="description" content="í¬ì¶˜ì¿ í‚¤ë¥¼ ì—´ë©´ ì˜¤ëŠ˜ì˜ ìš´ì„¸ê°€ í¼ì³ì§‘ë‹ˆë‹¤. ê¸ˆì „Â·ì§ì¥Â·ì• ì •Â·í•™ì—…Â·ê±´ê°• ì ìˆ˜ì™€ í–‰ìš´ í‚¤ì›Œë“œ ì œê³µ."/>
<style>
  :root{
    --grid:#f8d875;
    --bg:#ffe18a;
    --ink:#5a3b1a;
    --accent:#ff8a42;
    --accent-deep:#ea6a1b;
    --card:#fffaf0;
    --muted:#8b6d4e;
    --good:#ff8a42;
  }
  *{box-sizing:border-box}
  html:focus-within{scroll-behavior:smooth}
  body{
    margin:0; font-family:ui-sans-serif, system-ui, -apple-system, "Pretendard","Segoe UI",sans-serif;
    color:var(--ink); background:
      repeating-linear-gradient(0deg, var(--bg), var(--bg) 48px, var(--grid) 48px, var(--grid) 50px),
      var(--bg);
    min-height:100dvh;
  }

  /* ===== ê³µí†µ í—¤ë”/í‘¸í„° ===== */
  .site-header{
    position:sticky; top:0; z-index:10;
    display:flex; align-items:center; gap:12px; justify-content:space-between;
    background:#fff; padding:10px 14px; border-bottom:1px solid #e5e7eb;
  }
  .site-header .logo img{height:28px; max-width:140px; object-fit:contain; display:block}
  .site-header h1{margin:0; font-size:1.05rem; color:#111; text-align:center; flex:1}
  .site-header .today{font-size:.9rem; color:#444}

  footer{
    position:fixed; left:0; right:0; bottom:0; text-align:center; padding:10px 0;
    font-size:.85rem; color:#6b7280; background:rgba(255,255,255,.6); backdrop-filter:blur(6px);
    border-top:1px solid #e5e7eb;
  }

  /* ===== ë·° ì „í™˜ ===== */
  .container{max-width:860px; margin:0 auto; padding:16px; padding-bottom:72px}
  .view{display:none; animation:.35s ease both fadeInUp}
  .view.active{display:block}
  @keyframes fadeInUp{from{opacity:0; transform:translate3d(0,10px,0)} to{opacity:1; transform:none}}

  /* ===== ì¸íŠ¸ë¡œ ===== */
  .intro{
    display:grid; place-items:center; min-height:calc(100svh - 120px);
    text-align:center; gap:14px;
  }
  .intro h2{
    margin:0; font-size:1.8rem; line-height:1.25; letter-spacing:.01em; color:#7b4b22;
    text-shadow:0 2px 0 rgba(255,255,255,.35);
  }
  .intro p{margin:0; color:var(--muted)}
  .plate{
    margin-top:8px; width:min(78vw,360px); aspect-ratio:1/1; border-radius:50%;
    background:
      radial-gradient(closest-side, #fff 0 55%, transparent 56%),
      radial-gradient(circle at 50% 50%, rgba(0,0,0,.03), rgba(0,0,0,0) 60%),
      #f9f9f9;
    box-shadow: 0 20px 40px rgba(0,0,0,.18) inset, 0 24px 40px rgba(0,0,0,.18);
    display:grid; place-items:center; position:relative;
  }
  .touch-tip{
    position:absolute; top:14%; left:18%; font-size:1rem; color:#ad794e; transform:rotate(-12deg);
    opacity:.9
  }
  .cookie{width:66%; filter:drop-shadow(0 14px 22px rgba(0,0,0,.25)); cursor:pointer}
  .cookie:active{transform:scale(.98)}
  .cta{
    display:inline-block; margin-top:10px; padding:10px 16px; border-radius:999px;
    background:linear-gradient(180deg, var(--accent), var(--accent-deep)); color:#fff; font-weight:700;
    box-shadow:0 6px 0 #ce5c14; user-select:none; cursor:pointer
  }
  .cta:active{transform:translateY(2px); box-shadow:0 4px 0 #ce5c14}

  /* ===== ê²°ê³¼ ì¹´ë“œ ===== */
  .card{
    background:var(--card); border:1px solid #f2e5cf; border-radius:16px; padding:16px;
    box-shadow:0 10px 32px rgba(0,0,0,.12);
  }
  .result-msg{font-size:1.05rem; line-height:1.6; margin:0}
  .scores{margin-top:14px; display:grid; gap:10px}
  .row{display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px}
  .label{font-weight:700}
  .bar{height:12px; border-radius:999px; background:#fde7d5; position:relative; overflow:hidden}
  .bar>i{
    position:absolute; inset:0; width:var(--w,0%); background:linear-gradient(90deg,#ff9f5c,#ff7a2a);
    border-radius:999px; transition:width .8s cubic-bezier(.2,.8,.2,1);
  }
  .val{font-weight:800; color:#d8611c}

  .kw{margin-top:14px}
  .kw h3{margin:0 0 8px; font-size:1rem}
  .kwgrid{display:grid; gap:10px}
  .krow{display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px; padding:10px; border-radius:12px; background:#fff}
  .kico{font-size:1.15rem}
  .klabel{color:#7a5935}
  .btns{display:flex; gap:8px; flex-wrap:wrap; margin-top:14px}
  button{
    all:unset; cursor:pointer; padding:10px 14px; background:#fff; border:1px solid #e5e7eb; border-radius:10px; font-weight:700;
  }
  button.primary{background:linear-gradient(180deg,#ff9f5c,#ff7a2a); color:#fff; border-color:#ff8a42}

  /* ===== ì˜¤ë¥˜ ì˜¤ë²„ë ˆì´ ===== */
  #errOverlay{display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); color:#fff; z-index:9999; padding:16px; overflow:auto}
  #errOverlay pre{white-space:pre-wrap; word-break:break-word; background:rgba(255,255,255,.08); padding:12px; border-radius:8px}
</style>
</head>
<body>
  <!-- ê³µí†µ í°ìƒ‰ í—¤ë” -->
  <header class="site-header">
    <div class="logo">
      <img src="https://api.multicampus.com/ssf/v1/resource/public/images/FILBS202506207041267" alt="multicampus logo">
    </div>
    <h1>í¬ì¶˜ì¿ í‚¤</h1>
    <div class="today" id="today"></div>
  </header>

  <div class="container">
    <!-- ì¸íŠ¸ë¡œ í™”ë©´ -->
    <section id="viewIntro" class="view intro active" aria-label="í¬ì¶˜ì¿ í‚¤ ì¸íŠ¸ë¡œ">
      <div>
        <h2 id="introTitle">í–‰ìš´ë‹˜, í¬ì¶˜ì¿ í‚¤ë¥¼ ì—´ë©´</h2>
        <p>ìì„¸í•œ ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
      </div>

      <div class="plate" aria-hidden="true">
        <span class="touch-tip">Touch!</span>
        <!-- ì¿ í‚¤ SVG -->
        <svg class="cookie" id="cookieBtn" viewBox="0 0 512 320" role="button" tabindex="0" aria-label="í¬ì¶˜ì¿ í‚¤ ì—´ê¸°">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0" stop-color="#f7b06b"/>
              <stop offset="1" stop-color="#e08a41"/>
            </linearGradient>
            <radialGradient id="shine" cx="30%" cy="20%" r="60%">
              <stop offset="0" stop-color="#fff7" />
              <stop offset="1" stop-color="#0000"/>
            </radialGradient>
          </defs>
          <path d="M280 60c-46 8-88 44-112 82-26 42-32 86-20 106 10 17 40 30 74 10 30-18 56-64 70-118 10-39 7-77-12-80z" fill="url(#g1)"/>
          <path d="M232 62c49-14 115 3 154 36 40 33 58 83 48 109-9 24-48 37-86 18-33-16-60-55-78-105-13-36-20-59-38-58z" fill="url(#g1)"/>
          <ellipse cx="250" cy="110" rx="120" ry="80" fill="url(#shine)"/>
        </svg>
      </div>

      <div class="cta" id="cookieCta">í„°ì¹˜í•´ ì£¼ì„¸ìš”!</div>
    </section>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <section id="viewResult" class="view" aria-label="ìš´ì„¸ ê²°ê³¼">
      <div class="card" id="cardResult">
        <p class="result-msg" id="fortuneText">ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</p>

        <div class="scores" id="scores">
          <!-- JSì—ì„œ í–‰ ì‚½ì… -->
        </div>

        <div class="kw">
          <h3>í–‰ìš´ í‚¤ì›Œë“œ</h3>
          <div class="kwgrid" id="kwGrid">
            <!-- JSì—ì„œ ì‚½ì… -->
          </div>
        </div>

        <div class="btns">
          <button id="againBtn" class="primary">ë‹¤ì‹œ ì—´ê¸°</button>
          <button id="shareBtn">ê³µìœ /ë³µì‚¬</button>
          <button id="linkBtn">ë§í¬</button>
        </div>
      </div>
    </section>
  </div>

  <footer>Â© multicampus arcade</footer>

  <!-- ì˜¤ë¥˜ ì˜¤ë²„ë ˆì´ -->
  <div id="errOverlay" role="alert" aria-live="assertive">
    <h3>ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h3>
    <p>ë³µì‚¬/ë¶™ì—¬ë„£ê¸° ê³¼ì •ì—ì„œ ë¹ ì§„ ë¶€ë¶„ì´ ì—†ëŠ”ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>
    <pre id="errText"></pre>
  </div>

<script>
"use strict";

/* ===== ì˜¤ë¥˜ í‘œì‹œê¸° ===== */
(function(){
  const show = (msg) => {
    try{
      const el = document.getElementById('errOverlay');
      const pre = document.getElementById('errText');
      if(!el || !pre) return;
      pre.textContent = String(msg || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜');
      el.style.display = 'block';
    }catch(_){}
  };
  window.addEventListener('error', (e)=> show(e.message + (e.filename? `\\nat ${e.filename}:${e.lineno}:${e.colno}`:'')));
  window.addEventListener('unhandledrejection', (e)=> show('Promise ì˜¤ë¥˜: ' + (e.reason && e.reason.message ? e.reason.message : String(e.reason))));
})();

/* ===== ë‚ ì§œ/ìœ í‹¸ ===== */
const $ = (s)=>document.querySelector(s);
const todayEl = $("#today");
function fmtDate(){
  try{
    const f = new Intl.DateTimeFormat('ko-KR',{dateStyle:'medium'});
    return f.format(new Date());
  }catch(_){
    const d=new Date(); return `${d.getFullYear()}.${d.getMonth()+1}.${d.getDate()}`;
  }
}
todayEl.textContent = fmtDate();

/* ===== ë‚œìˆ˜ (ì‹œë“œ ë§í¬ ì§€ì›) ===== */
function LCG(seed){ let s=(seed>>>0); return ()=> ((s = (s*1664525 + 1013904223)>>>0) / 4294967296); }
function parseSeed(){ try{ const u=new URL(location.href); const s=u.searchParams.get('s'); if(s===null) return null; const n=Number(s); return Number.isFinite(n)? n:null; }catch(_){ return null } }
function makeSeedLink(seed){ const u=new URL(location.href); u.searchParams.set('s', String(seed>>>0)); return u.toString(); }

/* ===== ë°ì´í„° í’€ ===== */
const MSG = {
  love: [
    "ì˜¤ëŠ˜ì€ ì‚¬ë‘ì— ì˜¨ê¸°ê°€ ë”í•´ì§€ëŠ” ë‚ . ë§ˆìŒì„ ì†”ì§íˆ ê±´ë„¤ ë³´ì„¸ìš”.",
    "ê°ì •ì˜ ì†ë„ë¥¼ ë§ì¶”ë©´ ê´€ê³„ê°€ í•œì¸µ ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤.",
    "ì‘ì€ ì¹œì ˆ í•˜ë‚˜ê°€ ë¶„ìœ„ê¸°ë¥¼ ë°”ê¿‰ë‹ˆë‹¤."
  ],
  work: [
    "í•µì‹¬ í•œ ê°€ì§€ë¥¼ ì™„ì£¼í•˜ë©´ ì„±ê³¼ê°€ ë”°ë¼ì˜µë‹ˆë‹¤.",
    "í˜‘ì—…ì˜ ìš´ì´ ìˆì–´ìš”. ë„ì›€ì„ ì£¼ê³ ë°›ì•„ ë³´ì„¸ìš”.",
    "ë°ì´í„°ì™€ ê·¼ê±°ë¡œ ì„¤ë“í•  ë•Œ ì„±ê³¼ê°€ í½ë‹ˆë‹¤."
  ],
  money: [
    "ì§€ì¶œì„ ê³„íší•˜ë©´ ìˆ˜ìµì´ ì§€ì¼œì§‘ë‹ˆë‹¤.",
    "ì¶©ë™êµ¬ë§¤ë¥¼ í”¼í•˜ê³  ë¹„êµÂ·ë³´ë¥˜ ì „ëµì´ ìœ ë¦¬í•©ë‹ˆë‹¤.",
    "ê³ ì •ë¹„ ì ê²€ì´ ì˜¤ëŠ˜ì˜ íš¨ì."
  ],
  study: [
    "ì§§ê³  ìì£¼â€”ë¶„ì‚° í•™ìŠµì´ íš¨ìœ¨ì„ ëƒ…ë‹ˆë‹¤.",
    "ê°œë… ì •ë¦¬ì™€ ë³µìŠµì— ì´ˆì ì„ ë‘ë©´ ì„±ê³¼ê°€ ì»¤ì§‘ë‹ˆë‹¤.",
    "ì˜¤ëŠ˜ ì™¸ìš´ ê²ƒì€ ì˜¤ëŠ˜ ì ê²€!"
  ],
  health: [
    "ì»¨ë””ì…˜ ê´€ë¦¬ì— â€˜ìˆ˜ë©´â€™ì´ ì—´ì‡ ì…ë‹ˆë‹¤.",
    "ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­ê³¼ ìˆ˜ë¶„ ë³´ì¶©ìœ¼ë¡œ ë¦¬ë“¬ì„ íšŒë³µí•˜ì„¸ìš”.",
    "ë¬´ë¦¬ëŠ” ê¸ˆë¬¼. ë¯¸ì„¸í•œ íšŒë³µì´ ê³§ ì²´ë ¥ì…ë‹ˆë‹¤."
  ],
  general: [
    "ì‘ì€ ì‹œì‘ì´ í° ë³€í™”ë¥¼ ë¶€ë¦…ë‹ˆë‹¤. ì˜¤ëŠ˜ì˜ ë‚˜ë¥¼ ì‘ì›í•˜ì„¸ìš”.",
    "í–‰ìš´ì€ ì¤€ë¹„ëœ ê³³ì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ê³„íšì„ í•œ ì¤„ ì ì–´ë´…ì‹œë‹¤.",
    "íƒ€ì´ë°ì´ ì¢‹ìŠµë‹ˆë‹¤. ê°€ë³ê²Œ ì‹œë„í•´ë„ ì¢‹ì•„ìš”."
  ]
};
const DIRECTIONS = ["ë™ìª½","ì„œìª½","ë‚¨ìª½","ë¶ìª½","ë™ë‚¨","ì„œë‚¨","ë™ë¶","ì„œë¶"];
const COLORS = ["í”¼ì–´ë‚˜ëŠ” í•‘í¬","í˜¸ë°• ì˜¤ë Œì§€","ìˆœí•œ ë² ì´ì§€","ë°”ë‚˜ë‚˜ ì˜ë¡œ","ìˆ² ê·¸ë¦°","í•˜ëŠ˜ ë¸”ë£¨","ë³´ë¼ ë°”ì´ì˜¬ë ›","ì°¨ë¶„í•œ ë„¤ì´ë¹„"];
const FOODS = ["ìˆœë‘ë¶€ì°Œê°œ","ê¹€ì¹˜ë³¶ìŒë°¥","íŒŒìŠ¤íƒ€","ë¹„ë¹”êµ­ìˆ˜","ë¶ˆê³ ê¸°","ì—°ì–´ì´ˆë°¥","ìš°ë™","ì¹˜í‚¨","íŒ¥ë¹™ìˆ˜","ë¼ë–¼"];
const ICON = {num:"ğŸ“™", dir:"ğŸ§­", col:"ğŸ¨", food:"ğŸ²"};

/* ===== ìš”ì†Œ ===== */
const viewIntro = $("#viewIntro");
const viewResult = $("#viewResult");
const cookieBtn = $("#cookieBtn");
const cookieCta = $("#cookieCta");
const againBtn  = $("#againBtn");
const fortuneText = $("#fortuneText");
const scoresEl = $("#scores");
const kwGrid = $("#kwGrid");
const shareBtn = $("#shareBtn");
const linkBtn = $("#linkBtn");

/* ===== ë¡œì§ ===== */
function randGen(seed){
  const r = seed!=null ? LCG(seed) : Math.random;
  const pick = (arr)=> arr[Math.floor(r()*arr.length)];
  const n100 = ()=> Math.floor(60 + r()*40); // 60~100
  const scores = {
    ê¸ˆì „: n100(),
    ì§ì¥: n100(),
    ì• ì •: n100(),
    í•™ì—…: n100(),
    ê±´ê°•: n100()
  };
  // ìµœìƒìœ„ ì¹´í…Œê³ ë¦¬
  const top = Object.entries(scores).sort((a,b)=>b[1]-a[1])[0][0];
  let domain = "general";
  if(top==="ì• ì •") domain="love";
  else if(top==="ì§ì¥") domain="work";
  else if(top==="ê¸ˆì „") domain="money";
  else if(top==="í•™ì—…") domain="study";
  else if(top==="ê±´ê°•") domain="health";

  const message = pick(MSG[domain]);
  const lucky = {
    num: Math.floor(1 + r()*99),
    dir: pick(DIRECTIONS),
    col: pick(COLORS),
    food: pick(FOODS)
  };
  return {scores, message, lucky, domain};
}

function renderScores(scores){
  scoresEl.innerHTML = "";
  for(const [label,val] of Object.entries(scores)){
    const row = document.createElement('div'); row.className="row";
    const l = document.createElement('div'); l.className="label"; l.textContent=label;
    const bar = document.createElement('div'); bar.className="bar";
    const fill = document.createElement('i'); fill.style.setProperty('--w', val+'%'); bar.appendChild(fill);
    const v = document.createElement('div'); v.className="val"; v.textContent = `${val}ì `;
    row.append(l, bar, v); scoresEl.appendChild(row);
    // ì• ë‹ˆë©”ì´ì…˜ ì§€ì—°
    setTimeout(()=>{ fill.style.width = val+'%'; }, 30);
  }
}
function renderKeywords(kw){
  kwGrid.innerHTML = "";
  const rows = [
    {ico:ICON.num, label:"ìˆ«ì", value:String(kw.num)},
    {ico:ICON.dir, label:"ë°©í–¥", value:kw.dir},
    {ico:ICON.col, label:"ì»¬ëŸ¬", value:kw.col},
    {ico:ICON.food,label:"ìŒì‹", value:kw.food},
  ];
  rows.forEach(r=>{
    const div = document.createElement('div'); div.className='krow';
    const i = document.createElement('div'); i.className='kico'; i.textContent=r.ico;
    const l = document.createElement('div'); l.className='klabel'; l.textContent=r.label;
    const v = document.createElement('div'); v.style.fontWeight='800'; v.textContent=r.value;
    div.append(i,l,v); kwGrid.appendChild(div);
  });
}

function showResult(seed){
  const {scores, message, lucky} = randGen(seed);
  fortuneText.textContent = message;
  renderScores(scores);
  renderKeywords(lucky);
  viewIntro.classList.remove('active');
  viewResult.classList.add('active');
  // ì§„ë™
  if(navigator.vibrate) try{ navigator.vibrate(8); }catch(_){}
}

/* ===== ì´ë²¤íŠ¸ ===== */
function openCookie(){
  const seed = parseSeed() ?? (Date.now()>>>0);
  showResult(seed);
}
cookieBtn.addEventListener('click', openCookie);
cookieBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openCookie(); }});
cookieCta.addEventListener('click', openCookie);
againBtn.addEventListener('click', ()=>{
  const seed = Date.now()>>>0;
  const u=new URL(location.href); u.searchParams.set('s', String(seed)); history.replaceState(null,'',u);
  showResult(seed);
});

/* ê³µìœ /ë§í¬ */
shareBtn.addEventListener('click', async ()=>{
  const text = `ğŸª ì˜¤ëŠ˜ì˜ í¬ì¶˜ì¿ í‚¤ (${fmtDate()})
- ${fortuneText.textContent}
- ë§í¬: ${location.href}`;
  try{
    if(navigator.share){ await navigator.share({title:"ì˜¤ëŠ˜ì˜ í¬ì¶˜ì¿ í‚¤", text}); }
    else{ await navigator.clipboard.writeText(text); alert("ë³µì‚¬ ì™„ë£Œ! ì›í•˜ëŠ” ê³³ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”."); }
  }catch(_){}
});
linkBtn.addEventListener('click', async ()=>{
  const seed = parseSeed() ?? (Date.now()>>>0);
  const url = makeSeedLink(seed);
  try{ await navigator.clipboard.writeText(url); alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'); }
  catch{ prompt('ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”', url); }
});

/* ì¸íŠ¸ë¡œ ì œëª©ì— ì´ë¦„/ì•„ì´ë”” í‘œì‹œ (ì˜µì…˜) ?n=ìš°ì„± / ?id=1729 */
(function(){
  const u=new URL(location.href);
  const name = u.searchParams.get('n');
  const id = u.searchParams.get('id');
  const title = $("#introTitle");
  if(name){ title.textContent = `${name}ë‹˜, í¬ì¶˜ì¿ í‚¤ë¥¼ ì—´ë©´`; }
  else if(id){ title.textContent = `${id}ë‹˜, í¬ì¶˜ì¿ í‚¤ë¥¼ ì—´ë©´`; }
})();
</script>
</body>
</html>