<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì—ë‹ˆì–´ê·¸ë¨ ì„±í–¥ í…ŒìŠ¤íŠ¸ (í™•ì¥íŒ)</title>
<style>
  :root{
    --bg:#0f1115;
    --panel:#151821;
    --muted:#8b93a7;
    --text:#e6e9f2;

    /* â–¼ ë¸Œëœë“œ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ: ì´ ë‘ ì¤„ë§Œ ë°”ê¿”ë„ ë¶„ìœ„ê¸° í™• ë°”ë€œ */
    --primary:#6c8cff; /* ëŒ€í‘œìƒ‰ (ì˜ˆ: #ff7b54 ë¡œ êµì²´ ê°€ëŠ¥) */
    --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";

    --accent:#4ad6a7;
    --danger:#ff6b6b;
    --radius:16px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:linear-gradient(180deg,#0d0f14 0%,#0f1115 100%);
    color:var(--text); font-family:var(--font); -webkit-font-smoothing:antialiased;
  }
  .wrap{max-width:980px; margin:32px auto; padding:0 16px 80px}
  header{
    position:sticky; top:0; z-index:20;
    background:rgba(15,17,21,.8); backdrop-filter: blur(8px);
    border-bottom:1px solid #222632;
  }
  header .inner{max-width:980px; margin:0 auto; padding:14px 16px; display:flex; gap:12px; align-items:center}
  .logo{
    width:36px; height:36px; border-radius:12px; display:grid; place-items:center;
    background:linear-gradient(135deg,var(--primary),var(--accent));
    color:#0b0d12; font-weight:800; letter-spacing:.5px;
  }
  h1{font-size:1.2rem; margin:0}
  .sub{color:var(--muted); font-size:.9rem}
  .card{
    background:var(--panel); border:1px solid #232838; border-radius:var(--radius);
    box-shadow:0 10px 30px rgba(0,0,0,.35);
  }
  .hero{margin-top:20px; padding:24px}
  .grid{display:grid; gap:14px}
  .controls{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
  .btn{
    appearance:none; border:1px solid #2a3042; background:#1a1f2e; color:var(--text);
    padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer;
    transition:transform .06s ease, background .2s ease, border-color .2s;
  }
  .btn:hover{transform:translateY(-1px); border-color:#3a4160}
  .btn.primary{background:var(--primary); border-color:transparent; color:#0b0d12}
  .btn.ghost{background:transparent}
  .btn.danger{background:#23181b; border-color:#40252c; color:#ff9aa2}
  .badge{
    display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px;
    background:#10131b; border:1px solid #252a3a; color:var(--muted); font-size:.85rem;
  }
  .q{
    padding:16px; border:1px solid #232838; border-radius:14px; background:#121622;
  }
  .qhead{display:flex; gap:10px; align-items:center; margin-bottom:8px}
  .qno{
    width:28px; height:28px; border-radius:8px; background:#0f1422; border:1px solid #1f2740;
    display:grid; place-items:center; color:#9fb0ff; font-size:.85rem; font-weight:700;
  }
  .qtext{font-size:1rem}
  .scale{display:grid; grid-template-columns:repeat(5,1fr); gap:8px; margin-top:10px}
  .opt{position:relative}
  .opt input{position:absolute; inset:0; opacity:0; cursor:pointer}
  .chip{
    display:grid; place-items:center; padding:10px 4px; border-radius:10px;
    border:1px solid #2a3042; color:#c9d1ff; background:#14192a; font-size:.9rem;
    transition:all .15s ease;
  }
  .opt input:checked + .chip{background:var(--primary); color:#0b0d12; border-color:transparent; font-weight:800}
  .muted{color:var(--muted)}
  .result{
    padding:22px; display:grid; gap:14px
  }
  .bars{display:grid; gap:8px}
  .bar{ display:grid; gap:6px; }
  .bar .label{display:flex; justify-content:space-between; font-size:.9rem; color:#aeb6cc}
  .bar .track{
    height:10px; background:#0e1220; border:1px solid #222843; border-radius:999px; overflow:hidden;
  }
  .bar .fill{height:100%; width:0}
  .pill{
    display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px;
    background:#0f1422; border:1px solid #1e2640; color:#b8c2e8; font-weight:700
  }
  details{background:#0f1422; border:1px solid #212840; border-radius:12px; padding:12px}
  details summary{cursor:pointer; font-weight:700; margin:4px 0 8px}
  .foot{color:#8992a8; font-size:.85rem; margin-top:6px}
  .hide{display:none}
  .notice{padding:12px; border:1px dashed #2b3557; border-radius:12px; background:#0c0f19; color:#9fb0ff}
  @media (max-width:640px){
    .scale{gap:6px}
    .chip{padding:10px 0; font-size:.85rem}
  }
</style>
</head>
<body>
<header>
  <div class="inner">
    <div class="logo">E9</div>
    <div>
      <h1>ì—ë‹ˆì–´ê·¸ë¨ ì„±í–¥ í…ŒìŠ¤íŠ¸</h1>
      <div class="sub">1(ê°œí˜ê°€) ~ 9(í‰í™”ì£¼ì˜ì) Â· 54ë¬¸í•­ Â· ê°€ì¤‘ì¹˜/ì—­ì±„ì  ë°˜ì˜ Â· ê²°ê³¼/ë‚ ê°œ/ê·¸ë˜í”„</div>
    </div>
  </div>
</header>

<div class="wrap">
  <section class="card hero grid">
    <div class="grid" style="gap:8px">
      <div class="badge">ğŸ“ ì´ <strong id="qCount">0</strong>ë¬¸í•­ Â· ì§„í–‰ <span id="progressP" class="pill">0%</span></div>
      <div class="notice">ì´ í…ŒìŠ¤íŠ¸ëŠ” ìê¸° ì¸ì‹ìš© ì°¸ê³  ìë£Œì…ë‹ˆë‹¤. ì„ìƒ ì§„ë‹¨ì´ ì•„ë‹ˆë©°, ì»¨ë””ì…˜/ìƒí™©ì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.</div>
      <div class="controls">
        <button id="btnSubmit" class="btn primary">ê²°ê³¼ ë³´ê¸°</button>
        <button id="btnSave" class="btn">ì„ì‹œ ì €ì¥</button>
        <button id="btnLoad" class="btn ghost">ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button id="btnReset" class="btn danger">ì´ˆê¸°í™”</button>
        <button id="btnShare" class="btn ghost">ê³µìœ  ë§í¬</button>
      </div>
    </div>
  </section>

  <section id="formArea" class="card" style="margin-top:18px; padding:18px">
    <div id="qList" class="grid"></div>
  </section>

  <section id="resultArea" class="card hide" style="margin-top:18px">
    <div class="result">
      <div class="pill" id="topTypeBadge">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
      <div id="wingText" class="muted"></div>
      <div id="desc" class="grid"></div>
      <details>
        <summary>ì „ì²´ ì ìˆ˜(ì •ê·œí™” %) ë³´ê¸°</summary>
        <div class="bars" id="bars"></div>
      </details>
      <div class="foot">
        íŒ: ìƒìœ„ 2ìœ í˜• ì¡°í•©ì´ â€œë‚ ê°œ(wing)â€ ê²½í–¥ì„ íŒíŠ¸ ì¤„ ìˆ˜ ìˆì–´ìš”. ì„±ì¥/ìŠ¤íŠ¸ë ˆìŠ¤ ì´ë™ì„ ë„ í•¨ê»˜ ê³ ë ¤í•´ ë³´ì„¸ìš”.
      </div>
    </div>
  </section>

</div>

<script>
/** =========================
 *  ë°ì´í„°(ë¬¸í•­) ì •ì˜ â€” í™•ì¥íŒ 54ë¬¸í•­
 *  type: 1~9 (ì—ë‹ˆì–´ê·¸ë¨ ìœ í˜•)
 *  reverse: trueë©´ ì—­ì±„ì (6 - ê°’)
 *  weight: ê°€ì¤‘ì¹˜(ê¸°ë³¸ 1)
 *  ========================= */
const QUESTIONS = [
  // 1 ìœ í˜• Â· ê°œí˜ê°€
  { text:"ë‚˜ëŠ” ì¼ì„ ì‹œì‘í•˜ê¸° ì „ì— ê¸°ì¤€ì„ ë¨¼ì € ì„¸ìš´ë‹¤.", type:1 },
  { text:"ì™„ì„±ë„ê°€ ë‚®ìœ¼ë©´ ì œì¶œí•˜ê¸°ê°€ ì–´ë µë‹¤.", type:1, weight:1.3 },
  { text:"ì˜³ê³  ê·¸ë¦„ì— ë¯¼ê°í•˜ì§€ë§Œ ê°ì •í‘œí˜„ì€ ì ˆì œí•˜ëŠ” í¸ì´ë‹¤.", type:1 },
  { text:"ì‚¬ì†Œí•œ ì‹¤ìˆ˜ì—ë„ ì‰½ê²Œ ìì‹ ì„ íƒ“í•œë‹¤.", type:1, weight:1.2 },
  { text:"ìƒí™©ì— ë”°ë¼ ê¸°ì¤€ì„ ìœ ì—°í•˜ê²Œ ë°”ê¾¸ëŠ” í¸ì´ë‹¤.", type:1, reverse:true },
  { text:"í”¼ë“œë°±ì´ ì—„ê²©í•´ë„ ê°œì„ ì„ ìœ„í•´ ìˆ˜ìš©í•œë‹¤.", type:1 },

  // 2 ìœ í˜• Â· ì¡°ë ¥ê°€
  { text:"ìƒëŒ€ì˜ í•„ìš”ë¥¼ ë¹¨ë¦¬ ì•Œì•„ì±„ê³  ë¨¼ì € ë•ëŠ”ë‹¤.", type:2 },
  { text:"ë„ì›€ì„ ê±°ì ˆí•˜ë©´ ë¯¸ì•ˆí•¨ì´ ì˜¤ë˜ê°„ë‹¤.", type:2, weight:1.2 },
  { text:"ë‚¨ì„ ë„ìš°ë©´ì„œ ë‚´ ìš•êµ¬ë¥¼ ì¢…ì¢… ë’¤ë¡œ ë¯¸ë£¬ë‹¤.", type:2, weight:1.2 },
  { text:"ë„ì›€ì´ ê±°ì ˆë˜ë©´ ìƒì²˜ë¥¼ ì‰½ê²Œ ë°›ëŠ”ë‹¤.", type:2 },
  { text:"ê´€ê³„ì—ì„œ â€˜NOâ€™ë¥¼ í¸ì•ˆí•˜ê²Œ ë§í•œë‹¤.", type:2, reverse:true },
  { text:"ì¹­ì°¬ê³¼ ê°ì‚¬í‘œí˜„ì´ ë™ê¸°ë¶€ì—¬ì— í¬ê²Œ ì‘ìš©í•œë‹¤.", type:2 },

  // 3 ìœ í˜• Â· ì„±ì·¨ê°€
  { text:"ëª©í‘œ ë‹¬ì„± ê³¼ì •ì—ì„œ ìˆ˜ì¹˜í™”ëœ ì§€í‘œë¥¼ ì„ í˜¸í•œë‹¤.", type:3 },
  { text:"ë¹„íš¨ìœ¨ì„ ë³´ë©´ ê³§ë°”ë¡œ êµ¬ì¡°ë¥¼ ì†ë³´ê³  ì‹¶ë‹¤.", type:3 },
  { text:"ì„±ê³¼ì™€ í‰íŒì´ ë‚˜ì˜ ê°€ì¹˜ë¥¼ ì¦ëª…í•œë‹¤ê³  ëŠë‚€ë‹¤.", type:3, weight:1.3 },
  { text:"ê²°ê³¼ë³´ë‹¤ ê²½í—˜ì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ë¯¿ëŠ”ë‹¤.", type:3, reverse:true },
  { text:"ì£¼ì–´ì§„ ì‹œê°„ ë‚´ ìµœëŒ€ ì„±ê³¼ë¥¼ ë‚´ëŠ” ë° ìì‹  ìˆë‹¤.", type:3 },
  { text:"ì‹¤íŒ¨ë¥¼ ì¸ì •í•˜ê³  íœ´ì‹í•  ì¤„ ì•ˆë‹¤.", type:3, reverse:true },

  // 4 ìœ í˜• Â· ì˜ˆìˆ ê°€
  { text:"ê°ì •ì˜ ë¯¸ë¬˜í•œ ê²°ì„ ì •êµí•˜ê²Œ êµ¬ë¶„í•œë‹¤.", type:4, weight:1.2 },
  { text:"í‰ë²”í•¨ë³´ë‹¤ëŠ” ë‚˜ë§Œì˜ ê³ ìœ í•¨ì„ ì¶”êµ¬í•œë‹¤.", type:4 },
  { text:"ë¹„êµë‚˜ ê²°í•ê°ì— ì‰½ê²Œ í”ë“¤ë¦°ë‹¤.", type:4, weight:1.2 },
  { text:"ê°ì •ì„ í‘œí˜„í•˜ëŠ” ê²ƒì´ ë‚´ê²Œ ìì—°ìŠ¤ëŸ½ë‹¤.", type:4 },
  { text:"íƒ€ì¸ì˜ ì‹œì„ ì„ ê±°ì˜ ì˜ì‹í•˜ì§€ ì•ŠëŠ”ë‹¤.", type:4, reverse:true },
  { text:"ì •ì„œì  ê¹Šì´ë¥¼ ê°€ì§„ ì½˜í…ì¸ ì— ê°•í•˜ê²Œ ëŒë¦°ë‹¤.", type:4 },

  // 5 ìœ í˜• Â· íƒêµ¬ê°€
  { text:"í˜¼ì ëª°ì…í•˜ëŠ” ì‹œê°„ì´ ì—†ìœ¼ë©´ ì‰½ê²Œ ì†Œì§„ëœë‹¤.", type:5, weight:1.2 },
  { text:"ì¶©ë¶„íˆ ì•Œê¸° ì „ê¹Œì§€ëŠ” ê²°ì •ì„ ë¯¸ë£¨ëŠ” í¸ì´ë‹¤.", type:5 },
  { text:"ì •ë³´ì™€ ê°œë…ì„ êµ¬ì¡°í™”í•˜ëŠ” ê²ƒì„ ì¦ê¸´ë‹¤.", type:5, weight:1.2 },
  { text:"ê°ì •ì  ì§€ì§€ë¥¼ íƒ€ì¸ì—ê²Œ ìì£¼ êµ¬í•œë‹¤.", type:5, reverse:true },
  { text:"ë¦¬ì†ŒìŠ¤ ì†Œëª¨ë¥¼ ê³„ì‚°í•˜ë©° ì—ë„ˆì§€ë¥¼ ì•„ë‚€ë‹¤.", type:5 },
  { text:"ëª¨ë¥´ëŠ” ì±„ë¡œë„ ì‹¤í–‰í•˜ë©° ë°°ìš°ëŠ” í¸ì´ë‹¤.", type:5, reverse:true },

  // 6 ìœ í˜• Â· ì¶©ì‹¤ê°€
  { text:"ë¬¸ì œë¥¼ ëŒ€ë¹„í•´ ëŒ€ì•ˆ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë§ˆë ¨í•œë‹¤.", type:6 },
  { text:"ê¶Œìœ„ë¥¼ ì‹ ë¢°í•˜ì§€ë§Œ ë§¹ì‹ í•˜ì§€ ì•ŠëŠ”ë‹¤.", type:6 },
  { text:"ë¶ˆí™•ì‹¤ì„±ì— ë¯¼ê°í•˜ê³  ê±±ì •ì´ ì¦ë‹¤.", type:6, weight:1.3 },
  { text:"ì¦‰í¥ì  ê²°ì •ì´ ë³´í†µ ì˜ ë§ëŠ”ë‹¤.", type:6, reverse:true },
  { text:"íŒ€ì— ëŒ€í•œ ì±…ì„ê°ì´ ê°•í•˜ê³  ì•½ì†ì„ ì§€í‚¨ë‹¤.", type:6 },
  { text:"ìœ„í—˜ì„ ê°ìˆ˜í•˜ëŠ” í¸ì´ë‹¤.", type:6, reverse:true },

  // 7 ìœ í˜• Â· ë‚™ì²œê°€
  { text:"ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦¬ë©´ ë°”ë¡œ ì‹œë„í•´ë³¸ë‹¤.", type:7 },
  { text:"ì œì•½ì´ë‚˜ ë°˜ë³µì´ ë§ìœ¼ë©´ í¥ë¯¸ë¥¼ ìƒëŠ”ë‹¤.", type:7 },
  { text:"ë¶ˆí¸í•œ ê°ì •ì„ í”¼í•˜ë ¤ ë‹¤ë¥¸ ì¼ë¡œ ì „í™˜í•œë‹¤.", type:7, weight:1.2 },
  { text:"ë£¨í‹´ê³¼ ê·œì¹™ì„ ì„±ì‹¤íˆ ì§€í‚¨ë‹¤.", type:7, reverse:true },
  { text:"ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•˜ëŠ” ê³¼ì • ìì²´ê°€ ì¦ê²ë‹¤.", type:7 },
  { text:"í•˜ë‚˜ì— ì˜¤ë˜ ì§‘ì¤‘í•´ ê¹Šì´ íŒŒê³ ë“ ë‹¤.", type:7, reverse:true },

  // 8 ìœ í˜• Â· ë„ì „ì
  { text:"ì¤‘ìš”í•œ ìˆœê°„ì— ì£¼ë„ê¶Œì„ ì¥ê³  ì‹¶ë‹¤.", type:8 },
  { text:"ë¶€ë‹¹í•¨ì„ ë³´ë©´ ì¦‰ì‹œ ë§ì„ ë‹¤.", type:8, weight:1.2 },
  { text:"ì•½í•œ ëª¨ìŠµì„ ë³´ì´ëŠ” ê²Œ ì–´ë µë‹¤.", type:8, weight:1.3 },
  { text:"íƒ€ì¸ì˜ ì˜ê²¬ì— ì‰½ê²Œ íœ˜ë‘˜ë¦°ë‹¤.", type:8, reverse:true },
  { text:"ìœ„í—˜ì´ ìˆì–´ë„ í•„ìš”í•œ ê²°ì •ì„ ë°€ì–´ë¶™ì¸ë‹¤.", type:8 },
  { text:"ë¶€ë“œëŸ½ê²Œ ë¶€íƒí•˜ê³  ì˜ì¡´í•˜ëŠ” ê²ƒì´ í¸í•˜ë‹¤.", type:8, reverse:true },

  // 9 ìœ í˜• Â· í‰í™”ì£¼ì˜ì
  { text:"ê°ˆë“±ì„ ì¤„ì´ê³  ì¡°í™”ë¥¼ ìš°ì„ í•œë‹¤.", type:9 },
  { text:"ë‚´ ìš•êµ¬ë³´ë‹¤ ë¶„ìœ„ê¸° ìœ ì§€ë¥¼ íƒí•  ë•Œê°€ ë§ë‹¤.", type:9 },
  { text:"ê²°ì •ì„ ë¯¸ë£¨ë‹¤ ê¸°íšŒë¥¼ ë†“ì¹œ ê²½í—˜ì´ ìˆë‹¤.", type:9, weight:1.2 },
  { text:"ë¶„ëª…í•œ ì„ í˜¸ë¥¼ ì ê·¹ì ìœ¼ë¡œ ë“œëŸ¬ë‚¸ë‹¤.", type:9, reverse:true },
  { text:"íƒ€ì¸ì˜ ê´€ì ì„ ì‰½ê²Œ ìˆ˜ìš©í•˜ê³  ì¤‘ì¬í•œë‹¤.", type:9 },
  { text:"ì¤‘ìš”í•œ ìë¦¬ì—ì„œ ë˜ë ·í•˜ê²Œ ì£¼ì¥í•œë‹¤.", type:9, reverse:true },
];

const TYPE_META = {
  1:{name:"1 ìœ í˜• Â· ê°œí˜ê°€",  color:"#9fb0ff", brief:"ì›ì¹™Â·ê°œì„ Â·ì±…ì„"},
  2:{name:"2 ìœ í˜• Â· ì¡°ë ¥ê°€",  color:"#ffb6c1", brief:"ë°°ë ¤Â·ê´€ê³„Â·í—Œì‹ "},
  3:{name:"3 ìœ í˜• Â· ì„±ì·¨ê°€",  color:"#ffd27f", brief:"ëª©í‘œÂ·ì„±ê³¼Â·íš¨ìœ¨"},
  4:{name:"4 ìœ í˜• Â· ì˜ˆìˆ ê°€",  color:"#caa8ff", brief:"ì •ì²´ì„±Â·ê°ìˆ˜ì„±Â·ë…ì°½"},
  5:{name:"5 ìœ í˜• Â· íƒêµ¬ê°€",  color:"#8bd3ff", brief:"ë¶„ì„Â·ì§€ì‹Â·ê±°ë¦¬"},
  6:{name:"6 ìœ í˜• Â· ì¶©ì‹¤ê°€",  color:"#7fe3c2", brief:"ì‹ ë¢°Â·ëŒ€ë¹„Â·í˜‘ë ¥"},
  7:{name:"7 ìœ í˜• Â· ë‚™ì²œê°€",  color:"#ffe38b", brief:"ì¦ê±°ì›€Â·ê¸°íšŒÂ·ë‚™ê´€"},
  8:{name:"8 ìœ í˜• Â· ë„ì „ì",  color:"#ff9aa2", brief:"ê°•ë‹¨Â·ë³´í˜¸Â·ì§ì„¤"},
  9:{name:"9 ìœ í˜• Â· í‰í™”ì£¼ì˜ì",color:"#c7e59f", brief:"ì¡°í™”Â·ìˆ˜ìš©Â·ì•ˆì •"},
};

const TYPE_DESC = {
  1: "ì˜³ê³  ê·¸ë¦„ê³¼ ê°œì„ ì— ë¯¼ê°í•˜ë©° ì±…ì„ê°ì´ ê°•í•©ë‹ˆë‹¤. ì‹œìŠ¤í…œê³¼ ê¸°ì¤€ì„ ì„¸ì›Œ í’ˆì§ˆì„ ëŒì–´ì˜¬ë¦¬ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•˜ë‚˜, ê³¼ë„í•œ ìê¸°ë¹„íŒê³¼ ê²½ì§ì„±ì´ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ ì—°í•œ ê¸°ì¤€ ì„¤ì •ê³¼ 'ì¶©ë¶„íˆ ì¢‹ì€ ê²ƒ'ì„ í—ˆë½í•˜ëŠ” ì—°ìŠµì´ ì„±ì¥ì— ë„ì›€ ë©ë‹ˆë‹¤.",
  2: "íƒ€ì¸ì˜ ìš•êµ¬ë¥¼ ì˜ ì½ê³  ê¸°êº¼ì´ ë•ëŠ” ë”°ëœ»í•œ ì‚¬ëŒì…ë‹ˆë‹¤. ê´€ê³„ë¥¼ ì´‰ì§„í•˜ê³  íŒ€ ë¶„ìœ„ê¸°ë¥¼ ì‚´ë¦¬ì§€ë§Œ, ìê¸° ìš•êµ¬ë¥¼ ë¯¸ë£¨ë‹¤ ì§€ì¹˜ëŠ” íŒ¨í„´ì´ ë‚˜íƒ€ë‚˜ê¸°ë„ í•©ë‹ˆë‹¤. ê±´ê°•í•œ ê²½ê³„ì™€ ì†”ì§í•œ ê°ì •í‘œí˜„ì„ í†µí•´ â€˜ì£¼ëŠ” ê²ƒâ€™ê³¼ â€˜ë°›ëŠ” ê²ƒâ€™ì˜ ê· í˜•ì„ ë§ì¶”ë©´ ê°•ì ì´ ë¹›ë‚©ë‹ˆë‹¤.",
  3: "ëª©í‘œì§€í–¥Â·íš¨ìœ¨ ì§€í–¥ìœ¼ë¡œ ì„±ê³¼ ì°½ì¶œì— ëŠ¥ìˆ™í•©ë‹ˆë‹¤. ë³€í™”ì— ë¹ ë¥´ê²Œ ì ì‘í•˜ê³  ê²°ê³¼ë¡œ ì¦ëª…í•˜ì§€ë§Œ, ì´ë¯¸ì§€Â·ì„±ê³¼ì— ê³¼ëª°ì…í•˜ë©´ ì§„ì •ì„±ì´ í”ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³¼ì •ì˜ ì˜ë¯¸ë¥¼ ì¬ë°œê²¬í•˜ê³  íœ´ì‹/ê°ì • ì ‘ì†ì„ ëŠ˜ë¦¬ë©´ ì§€ì† ê°€ëŠ¥í•œ ì„±ì·¨ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
  4: "ì •ì²´ì„±ê³¼ ê°ìˆ˜ì„±ì´ í’ë¶€í•˜ë©° ê¹Šì´ ìˆëŠ” ì°½ì˜ì„±ì„ ì§€ë‹™ë‹ˆë‹¤. ì°¨ë³„í™” ìš•êµ¬ê°€ ê°•í•´ ë…ì°½ì„±ì„ ë§Œë“¤ì–´ë‚´ì§€ë§Œ, ë¹„êµÂ·ê²°í•ê°ì— í”ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ìƒ ì† ì•ˆì • ë£¨í‹´ê³¼ ìê¸°ì—°ë¯¼ì„ ê¸°ë¥´ë©´ ê°ì •ì˜ ê¹Šì´ê°€ ìƒì‚°ì„±ê³¼ ì—°ê²°ë©ë‹ˆë‹¤.",
  5: "ë¶„ì„ê³¼ í†µì°°ì— ê°•í•˜ê³  ì§‘ì¤‘ë ¥ ìˆëŠ” íƒêµ¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì—ë„ˆì§€ ê´€ë¦¬ë¥¼ ì¤‘ì‹œí•´ ìì›ì„ ì•„ë¼ì§€ë§Œ, ê³¼ë„í•œ ê±°ë¦¬ë‘ê¸°ëŠ” ê³ ë¦½ì„ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ì¶©ë¶„íˆ ì•Œê¸° ì „ ì‹¤í–‰â€™ì˜ ì‘ì€ ì‹¤í—˜ê³¼ ê´€ê³„ì  ê°œë°©ì´ ì—­ëŸ‰ì„ ì‚¬íšŒì  ê°€ì¹˜ë¡œ ì „í™˜ì‹œí‚µë‹ˆë‹¤.",
  6: "ì‹ ë¢°Â·ì•ˆì „ì„ ì¤‘ì‹œí•˜ë©° ëŒ€ë¹„ì±…ì„ ì„¸ìš°ëŠ” íŒ€ í”Œë ˆì´ì–´ì…ë‹ˆë‹¤. ìœ„í—˜ ê°ì§€ì™€ ë¦¬ìŠ¤í¬ ê´€ë¦¬ì— ëŠ¥í•˜ë‚˜, ë¶ˆí™•ì‹¤ì„± ê³¼ê°ì„±ì€ ë¶ˆì•ˆìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìê¸°í™•ì‹  í›ˆë ¨ê³¼ â€˜ì¦ê±° ê¸°ë°˜ ë‚™ê´€â€™ì´ ê· í˜•ì„ ë•ê³ , ì‹ ë¢°í•˜ëŠ” ë™ë£Œì™€ì˜ í˜‘ë ¥ì´ í˜ì´ ë©ë‹ˆë‹¤.",
  7: "ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•˜ê³  í™œë ¥ì„ ì „íŒŒí•˜ëŠ” ì•„ì´ë””ì–´ ë©”ì´ì»¤ì…ë‹ˆë‹¤. ì¦ê±°ì›€ê³¼ ë‚™ê´€ìœ¼ë¡œ íŒ€ì„ ë„ìš°ì§€ë§Œ, ë¶ˆí¸í•œ ê°ì •ì„ íšŒí”¼í•˜ë©´ ì–•ì€ ì „í™˜ì´ ë°˜ë³µë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŠë¦¬ê²Œ ë¨¸ë¬´ëŠ” ì—°ìŠµê³¼ ìš°ì„ ìˆœìœ„ ì§‘ì¤‘ì„ í†µí•´ ê¹Šì´ì™€ ì§€ì†ì„±ì„ í‚¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  8: "ê°•ë‹¨ ìˆê³  ë³´í˜¸ì ì¸ ë¦¬ë” ì„±í–¥ì…ë‹ˆë‹¤. ë¶ˆì˜ì— ë§ì„œë©° ê²°ë‹¨ì´ ë¹ ë¥´ì§€ë§Œ, ì·¨ì•½ì„± íšŒí”¼ëŠ” ê´€ê³„ì  ê¸´ì¥ì„ í‚¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ˆì „í•œ ê³µê°„ì—ì„œ ì•½í•¨ì„ ì†”ì§íˆ ë‚˜ëˆ„ê³  ìœ„ì„ì„ ëŠ˜ë¦¬ë©´ ì‹ ë¢°ê°€ ë‘í„°ì›Œì§€ê³  ì˜í–¥ë ¥ì€ ë”ìš± ì»¤ì§‘ë‹ˆë‹¤.",
  9: "ì˜¨í™”í•˜ê³  í¬ìš©ì ì´ë©° ì¤‘ì¬ì— ëŠ¥í•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ê´€ì ì„ í†µí•©í•´ ì•ˆì •ê°ì„ ì£¼ì§€ë§Œ, ìê¸°ì£¼ì¥ íšŒí”¼ë¡œ ë°©í–¥ì„±ì„ ìƒì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ì€ ì„ íƒë¶€í„° ëª…í™•íˆ ë§í•˜ê¸°ì™€ ì—ë„ˆì§€ í™œì„±í™”ë¥¼ ì—°ìŠµí•˜ë©´ ì¡°í™” ì† ì£¼ì²´ì„±ì´ ì‚´ì•„ë‚©ë‹ˆë‹¤.",
};

/** ====== ë Œë”ë§ ====== */
const qList = document.getElementById('qList');
const qCount = document.getElementById('qCount');
const progressP = document.getElementById('progressP');
const resultArea = document.getElementById('resultArea');
const bars = document.getElementById('bars');
const topTypeBadge = document.getElementById('topTypeBadge');
const wingText = document.getElementById('wingText');
const descBox = document.getElementById('desc');

function renderQuestions(){
  qList.innerHTML='';
  QUESTIONS.forEach((q,idx)=>{
    const id = `q_${idx}`;
    const el = document.createElement('div');
    el.className='q';
    el.innerHTML = `
      <div class="qhead">
        <div class="qno">${idx+1}</div>
        <div class="qtext">${escapeHtml(q.text)}</div>
      </div>
      <div class="scale" role="radiogroup" aria-labelledby="${id}_label">
        ${[1,2,3,4,5].map(v=>{
          const name = `r_${idx}`;
          const lab = v===1?'ì „í˜€ ì•„ë‹ˆë‹¤':v===3?'ë³´í†µ':v===5?'ë§¤ìš° ê·¸ë ‡ë‹¤':'';
          return `
          <label class="opt" title="${lab}">
            <input type="radio" name="${name}" value="${v}" />
            <div class="chip">${v}</div>
          </label>`;
        }).join('')}
      </div>
      <div class="muted" style="margin-top:8px;font-size:.85rem;">
        1 ì „í˜€ ì•„ë‹ˆë‹¤ Â· 2 ì•„ë‹ˆë‹¤ Â· 3 ë³´í†µ Â· 4 ê·¸ë ‡ë‹¤ Â· 5 ë§¤ìš° ê·¸ë ‡ë‹¤
      </div>
    `;
    qList.appendChild(el);
  });
  qCount.textContent = QUESTIONS.length;
}
renderQuestions();

/** ====== ìœ í‹¸ ====== */
function escapeHtml(s){ return s.replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m])); }
function getResponses(){
  const values = [];
  QUESTIONS.forEach((_,i)=>{
    const checked = document.querySelector(`input[name="r_${i}"]:checked`);
    values[i] = checked ? Number(checked.value) : null;
  });
  return values;
}
function calcProgress(vals){
  const answered = vals.filter(v=>v!=null).length;
  return Math.round(answered/QUESTIONS.length*100);
}
function normalizeScores(raw){
  // ìœ í˜•ë³„ ìµœëŒ€ì  ìë™ ê³„ì‚°(ë¬¸í•­ìˆ˜Ã—5Ã—ê°€ì¤‘ì¹˜ í•©)
  const maxPerType = {}; for (const t of Object.keys(TYPE_META)) maxPerType[t]=0;
  QUESTIONS.forEach((q)=>{
    const w = q.weight ?? 1;
    maxPerType[q.type] += 5*w;
  });
  const norm = {};
  for (const t of Object.keys(TYPE_META)){
    norm[t] = Math.round((raw[t] / (maxPerType[t]||1)) * 100);
  }
  return norm;
}
function compute(){
  const vals = getResponses();
  const progress = calcProgress(vals);
  progressP.textContent = progress + "%";
  if(vals.some(v=>v===null)){
    alert("ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ ì£¼ì„¸ìš”. (ì§„í–‰ë¥  "+progress+"%)");
    return null;
  }
  const scores = {}; for (const t of Object.keys(TYPE_META)) scores[t]=0;

  QUESTIONS.forEach((q,i)=>{
    let v = vals[i];
    if (q.reverse) v = 6 - v; // ì—­ì±„ì 
    const w = q.weight ?? 1;
    scores[q.type] += v * w;
  });

  const norm = normalizeScores(scores);
  return {raw:scores, norm};
}
function findTopTwo(norm){
  const pairs = Object.entries(norm).map(([t,v])=>({t:Number(t), v}));
  pairs.sort((a,b)=>b.v-a.v);
  return [pairs[0], pairs[1], pairs];
}

/** ====== ê²°ê³¼ ë Œë” ====== */
function renderBars(norm){
  bars.innerHTML='';
  for (let t=1;t<=9;t++){
    const meta = TYPE_META[t];
    const v = norm[t];
    const row = document.createElement('div');
    row.className='bar';
    row.innerHTML = `
      <div class="label"><span>${meta.name}</span><span>${v}%</span></div>
      <div class="track"><div class="fill" style="width:${v}%; background:${meta.color}"></div></div>
    `;
    bars.appendChild(row);
  }
}
function renderSummary(top, second){
  const m1 = TYPE_META[top.t];
  const m2 = TYPE_META[second.t];
  topTypeBadge.style.background = "#0f1422";
  topTypeBadge.style.border = "1px solid #1e2640";
  topTypeBadge.style.color = "#cfe1ff";
  topTypeBadge.innerHTML = `ğŸ ìƒìœ„ ìœ í˜•: <strong style="color:${m1.color}">${m1.name}</strong> <span class="muted">(${top.v}%)</span>
    <span style="margin-left:8px" class="pill">í‚¤ì›Œë“œ: ${m1.brief}</span>`;
  wingText.innerHTML = `ğŸª¶ ë‚ ê°œ(wing) í›„ë³´: <b style="color:${m2.color}">${m2.name}</b> (${m2.brief})`;
  descBox.innerHTML = `
    <div class="grid" style="gap:8px">
      <div><b>${m1.name}</b> â€” ${TYPE_DESC[top.t]}</div>
      <div><b>${m2.name}</b> â€” ${TYPE_DESC[second.t]}</div>
    </div>`;
}

/** ====== ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°/ê³µìœ  ====== */
const STORAGE_KEY = "enneagram_responses_v2_54q";
function save(){
  const vals = getResponses();
  localStorage.setItem(STORAGE_KEY, JSON.stringify(vals));
  alert("ì‘ë‹µì„ ì €ì¥í–ˆì–´ìš”. ê°™ì€ ë¸Œë¼ìš°ì €ì—ì„œ ì´ì–´ì„œ í•  ìˆ˜ ìˆì–´ìš”.");
}
function loadSaved(){
  const raw = localStorage.getItem(STORAGE_KEY);
  if(!raw) return alert("ì €ì¥ëœ ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤.");
  const vals = JSON.parse(raw);
  vals.forEach((v,i)=>{
    if(v==null) return;
    const sel = document.querySelector(`input[name="r_${i}"][value="${v}"]`);
    if (sel) sel.checked = true;
  });
  progressP.textContent = calcProgress(vals)+"%";
  alert("ë¶ˆëŸ¬ì™”ì–´ìš”!");
}
function resetAll(){
  localStorage.removeItem(STORAGE_KEY);
  document.querySelectorAll('input[type="radio"]').forEach(r=>r.checked=false);
  progressP.textContent = "0%";
  resultArea.classList.add('hide');
  window.history.replaceState({}, "", window.location.pathname);
}
function shareLink(norm){
  const qs = new URLSearchParams();
  for (let t=1;t<=9;t++) qs.set("t"+t, norm[t]);
  const url = `${location.origin}${location.pathname}?${qs.toString()}`;
  navigator.clipboard.writeText(url).then(()=>{
    alert("ê³µìœ  ë§í¬ë¥¼ ë³µì‚¬í–ˆì–´ìš”:\n" + url);
  }).catch(()=>{
    prompt("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì•„ë˜ ë§í¬ë¥¼ ìˆ˜ë™ ë³µì‚¬í•˜ì„¸ìš”:", url);
  });
}
function loadFromQuery(){
  const u = new URL(location.href);
  const fromQS = {};
  let has=false;
  for (let t=1;t<=9;t++){
    const v = Number(u.searchParams.get("t"+t));
    if(!isNaN(v) && v>=0 && v<=100){ fromQS[t]=v; has=true; }
  }
  if(has){
    resultArea.classList.remove('hide');
    const [top, second] = findTopTwo(fromQS);
    renderSummary(top, second);
    renderBars(fromQS);
    window.scrollTo({top: document.getElementById('resultArea').offsetTop - 60, behavior:'smooth'});
  }
}
loadFromQuery();

/** ====== ì´ë²¤íŠ¸ ë°”ì¸ë”© ====== */
document.getElementById('btnSubmit').addEventListener('click', ()=>{
  const out = compute();
  if(!out) return;
  const [top, second] = findTopTwo(out.norm);
  resultArea.classList.remove('hide');
  renderSummary(top, second);
  renderBars(out.norm);
  window.scrollTo({top: document.getElementById('resultArea').offsetTop - 60, behavior:'smooth'});
});
document.getElementById('btnSave').addEventListener('click', save);
document.getElementById('btnLoad').addEventListener('click', loadSaved);
document.getElementById('btnReset').addEventListener('click', ()=>{
  if(confirm("ì‘ë‹µê³¼ ê²°ê³¼ë¥¼ ëª¨ë‘ ì§€ìš¸ê¹Œìš”?")) resetAll();
});
document.getElementById('btnShare').addEventListener('click', ()=>{
  const out = compute();
  if(!out) return;
  shareLink(out.norm);
});
// ì§„í–‰ë¥  ì‹¤ì‹œê°„ ê°±ì‹  + ìë™ì €ì¥
qList.addEventListener('change', ()=>{
  const vals = getResponses();
  progressP.textContent = calcProgress(vals)+"%";
  localStorage.setItem(STORAGE_KEY, JSON.stringify(vals));
});
</script>
</body>
</html>